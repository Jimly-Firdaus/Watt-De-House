image: python:3.9-slim-buster

stages:
  - test

variables:
  PYTHONPATH: "$PYTHONPATH:$CI_PROJECT_DIR/src"

before_script:
  - apt-get update && apt-get install -y python3-pip libgl1-mesa-glx libxcb1 libx11-xcb1 libxcb-icccm4 libxcb-image0 libxcb-keysyms1 libxcb-randr0 libxcb-render-util0
  - echo "Python 3 and pip installed"
  - pip3 install PyQt5
  - echo "PyQt5 installed"

run-tests:
  tags:
    - docker-runner
  stage: test
  script:
    - python3 -m unittest discover test
  only:
    - merge_requests
    - main
    - dev
    - feature/gui