image: alpine:latest

stages:
  - test

variables:
  PYTHONPATH: "$PYTHONPATH:$CI_PROJECT_DIR/src"

before_script:
  - apk add --update python3 py3-pip gcc musl-dev python3-dev
  - pip3 install sip==5.5.0
  - echo "Python 3 and build tools installed"
  - pip3 install PyQt5==5.15.4
  - echo "PyQt5 installed"

run-tests:
  tags:
    - docker-runner
  stage: test
  script:
    - python3 -m unittest discover test
  only:
    - merge_requests
    - main
    - dev
    - feature/gui
